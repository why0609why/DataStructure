# 为什么要是用线段树
对于区间查询和区间更新
使用数组实现的话复杂度都是O(n)
使用线段树的话复杂度都是O(logn)，可以明显看出是使用线段树对于区间查询和区间更新都很快

对于线段树的使用一般都是固定的区间，只是区间内的元素可以发生变化，就是可以改查(区间或者单点都可以)，不能增删。

# 线段树的性质
线段树既不一定是完全二叉树也不是满二叉树
不过线段树是平衡二叉树。
不过话说什么是平衡二叉树？在平衡二叉树中最大深度和最小深度的差不会超过1。堆也是平衡二叉树。

这里需要知道一点，线段树的存储如果用数组存储的话，需要把它看做一颗满二叉树，只不过数组中没有值的地方就不管就行。
所以问题来了，如果区间有n个节点，数组表示的话需要有多少个节点？
![](线段树的节点个数的性质.png)
![](线段树节点个数性质2.png)
![](线段树节点个数性质3.png)

假设有n个节点而且最好情况下n=2^k，因为最后一层节点个数等于前面所有层节点个数这个性质，因为n=2^k，所以最后一层节点的个数n+出最后一层的所有节点的个数n(近似于，但是比n小一点点)，一共需要2n个位置就够了，但是如果n=2^k+1，那么和原来相比，就是相对于原来多了一层，那么又要按照满二叉树来看的话，之前是2n个位置，现在又在下面多了新的一层，自然存储的位置就变成了原来的2n+新的2n = 4n。这就是用数组存储线段树为什么要4n的存储位置原因了。所以用线段树存储n个节点，需要4n个存储位置的原因。






